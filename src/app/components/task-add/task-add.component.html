<div class="modal-overlay">
  <div 
    class="modal"
    (touchstart)="onTouchStart($event)"
    (touchmove)="onTouchMove($event)"
    (touchend)="onTouchEnd()"
  >
    <div class="modal-header">
      <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
      <button class="close-btn" (click)="onCancel()">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
        <div class="image-upload">
          <input 
            type="file" 
            accept="image/*" 
            (change)="onFileSelected($event)"
            #fileInput
            style="display: none"
          />
          
          <div class="image-preview">
            <img [src]="selectedImagePreview" alt="Preview">
            <button 
              type="button" 
              class="btn-remove-image" 
              (click)="removeImage()"
              *ngIf="selectedImageFile"
              title="–£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
            >
              ‚úï
            </button>
          </div>

          <button type="button" class="upload-btn" (click)="fileInput.click()">
            <span class="upload-icon">üì∑</span>
            <span>{{ selectedImageFile ? '–ó–∞–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ' : '–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ' }}</span>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
        <input 
          id="title"
          type="text" 
          [(ngModel)]="title" 
          placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..."
          maxlength="100"
          autofocus
        />
      </div>

      <div class="form-group">
        <label for="text">–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea 
          id="text"
          [(ngModel)]="text" 
          placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ..."
          rows="10"
        ></textarea>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-save" (click)="onSave()" [disabled]="!title.trim() || isSaving">
        <span *ngIf="!isSaving">–°–æ–∑–¥–∞—Ç—å</span>
        <span *ngIf="isSaving" class="loading-text">‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ...</span>
      </button>
      <button class="btn-cancel" (click)="onCancel()" [disabled]="isSaving">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>
