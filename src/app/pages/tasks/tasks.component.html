<app-header 
  [isAdmin]="authService.isAdmin()"
  [currentUser]="authService.getCurrentUser()"
  (addTask)="addTask()"
  (logout)="logout()"
></app-header>

<main class="main-content">
  <div class="container">
    <div class="tasks-grid">
      @for (task of taskService.allTasks(); track task.id) {
        <app-task-card
          [id]="task.id"
          [title]="task.title"
          [text]="task.text || ''"
          [image]="task.image || ''"
          (cardClick)="openTask($event)"
        ></app-task-card>
      } @empty {
        <div class="empty-state">
          <div class="empty-icon">üìã</div>
          <h2 class="empty-title">{{ authService.isAdmin() ? '–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç' : '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞—á' }}</h2>
          <p class="empty-description">
            {{ authService.isAdmin() 
              ? '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É" —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É' 
              : '–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∑–∂–µ.' 
            }}
          </p>
          <button *ngIf="authService.isAdmin()" class="empty-action" (click)="addTask()">
            <span class="plus-icon">+</span> –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É
          </button>
        </div>
      }
    </div>
  </div>
</main>

<app-task-add
  *ngIf="showAddModal"
  (close)="closeAddModal()"
  (save)="saveNewTask($event)"
></app-task-add>

<app-task-detail
  [task]="selectedTask"
  [isAdmin]="authService.isAdmin()"
  (close)="closeTaskDetail()"
  (save)="saveTaskDetail($event)"
  (delete)="deleteTaskFromDetail()"
  (respond)="onRespond()"
></app-task-detail>
