import{A as S,B as ee,C as l,D as M,E as w,F as y,G as T,H as E,I as D,J as G,K as te,O as h,P as ne,Q as ie,R as v,V as oe,X as re,Y as ae,Z as V,_ as A,a as W,b as q,ba as F,c as J,e as p,ea as se,f as g,fa as z,g as L,ga as le,ha as de,i as K,j as Q,k as X,l as P,m as s,n as b,o as O,p as C,q as _,r as Z,s as $,t as d,u as r,v as a,w as k,x as f,y as u,z as c}from"./chunk-QB7SWPRY.js";function ue(t,i){if(t&1&&(r(0,"div",8)(1,"span",9),l(2),a(),r(3,"span",10),l(4),a()()),t&2){let e=c();s(),ee("admin",e.currentUser.role==="admin")("user",e.currentUser.role==="user"),s(),w(" ",e.currentUser.role==="admin"?"\u{1F451} \u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":"\u{1F464} \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"," "),s(2),M(e.currentUser.username)}}function pe(t,i){t&1&&(L(),r(0,"svg",11),k(1,"path",12),a())}function ge(t,i){t&1&&(L(),r(0,"svg",11),k(1,"circle",13)(2,"line",14)(3,"line",15)(4,"line",16)(5,"line",17)(6,"line",18)(7,"line",19)(8,"line",20)(9,"line",21),a())}function me(t,i){if(t&1){let e=f();r(0,"button",22),u("click",function(){p(e);let o=c();return g(o.addTask.emit())}),r(1,"span",23),l(2,"+"),a(),l(3," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 "),a()}}var j=class t{constructor(i){this.themeService=i}isAdmin=!1;currentUser=null;addTask=new b;logout=new b;toggleTheme(){this.themeService.toggleTheme()}static \u0275fac=function(e){return new(e||t)(O(de))};static \u0275cmp=C({type:t,selectors:[["app-header"]],inputs:{isAdmin:"isAdmin",currentUser:"currentUser"},outputs:{addTask:"addTask",logout:"logout"},decls:13,vars:8,consts:[[1,"app-header"],[1,"header-title"],[1,"header-actions"],["class","user-info",4,"ngIf"],["title","\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0442\u0435\u043C\u0443",1,"theme-toggle",3,"click"],["class","theme-icon","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["class","btn-add-task","title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443",3,"click",4,"ngIf"],["title","\u0412\u044B\u0439\u0442\u0438",1,"btn-logout",3,"click"],[1,"user-info"],[1,"user-badge"],[1,"username"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"theme-icon"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["cx","12","cy","12","r","5"],["x1","12","y1","1","x2","12","y2","3"],["x1","12","y1","21","x2","12","y2","23"],["x1","4.22","y1","4.22","x2","5.64","y2","5.64"],["x1","18.36","y1","18.36","x2","19.78","y2","19.78"],["x1","1","y1","12","x2","3","y2","12"],["x1","21","y1","12","x2","23","y2","12"],["x1","4.22","y1","19.78","x2","5.64","y2","18.36"],["x1","18.36","y1","5.64","x2","19.78","y2","4.22"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443",1,"btn-add-task",3,"click"],[1,"plus-icon"]],template:function(e,n){e&1&&(r(0,"header",0)(1,"div",1),l(2,"Taskask"),a(),r(3,"div",2),_(4,ue,5,6,"div",3),r(5,"button",4),u("click",function(){return n.toggleTheme()}),_(6,pe,2,0,"svg",5),D(7,"async"),_(8,ge,10,0,"svg",5),D(9,"async"),a(),_(10,me,4,0,"button",6),r(11,"button",7),u("click",function(){return n.logout.emit()}),l(12," \u{1F6AA} \u0412\u044B\u0445\u043E\u0434 "),a()()()),e&2&&(s(4),d("ngIf",n.currentUser),s(2),d("ngIf",!G(7,4,n.themeService.isDarkMode$)),s(2),d("ngIf",G(9,6,n.themeService.isDarkMode$)),s(2),d("ngIf",n.isAdmin))},dependencies:[v,h,ne],styles:[".app-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:80px;display:flex;align-items:center;justify-content:space-between;padding:0 40px;background:#ffffff80;backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px);border-bottom:1px solid rgba(0,71,132,.2);box-shadow:0 4px 30px #0047841a;z-index:100}.dark[_nghost-%COMP%]   .app-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .app-header[_ngcontent-%COMP%]{background:#161b22b3;border-bottom:1px solid rgba(0,100,180,.3);box-shadow:0 4px 30px #0009}.header-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;letter-spacing:.3px;color:#1a1a1a}.dark[_nghost-%COMP%]   .header-title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 14px;background:#0000000d;border-radius:10px;border:1px solid rgba(0,0,0,.1)}.dark[_nghost-%COMP%]   .user-info[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .user-info[_ngcontent-%COMP%]{background:#ffffff14;border-color:#ffffff26}.user-badge[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;padding:4px 10px;border-radius:6px;display:inline-flex;align-items:center;gap:4px}.user-badge.admin[_ngcontent-%COMP%]{background:#00478426;color:#004784;border:1px solid rgba(0,71,132,.3)}.dark[_nghost-%COMP%]   .user-badge.admin[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .user-badge.admin[_ngcontent-%COMP%]{background:#0064b433;color:#64b4ff;border-color:#0064b466}.user-badge.user[_ngcontent-%COMP%]{background:#6c757d26;color:#495057;border:1px solid rgba(108,117,125,.3)}.dark[_nghost-%COMP%]   .user-badge.user[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .user-badge.user[_ngcontent-%COMP%]{background:#6c757d33;color:#adb5bd;border-color:#6c757d66}.username[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary)}.theme-toggle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:10px;background:#0000000d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(0,71,132,.3);border-radius:10px;cursor:pointer;transition:all .2s;min-width:40px;height:40px}.dark[_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%]{background:#ffffff1a;border:2px solid rgba(0,100,180,.4)}.theme-toggle[_ngcontent-%COMP%]:hover{background:#0047841a;transform:translateY(-2px);box-shadow:0 4px 12px #00478433;border-color:#00478480}.dark[_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover{background:#0064b426;box-shadow:0 4px 12px #0064b440;border-color:#0064b499}.theme-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#004784;transition:all .2s}.dark[_nghost-%COMP%]   .theme-icon[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .theme-icon[_ngcontent-%COMP%]{color:#0064b4}.btn-add-task[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 18px;background:var(--primary-color);color:#fff;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 4px 12px #00478440}.btn-add-task[_ngcontent-%COMP%]:hover{background:var(--primary-hover);box-shadow:0 6px 20px #00478459;transform:translateY(-2px)}.btn-add-task[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-logout[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 18px;background:#dc35451a;color:#dc3545;border:1px solid rgba(220,53,69,.3);border-radius:10px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.btn-logout[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;border-color:#dc3545;transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d}.plus-icon[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}"]})};function _e(t,i){if(t&1&&(r(0,"div",9),k(1,"img",10),a()),t&2){let e=c();s(),d("src",e.image,P)("alt",e.title)}}function fe(t,i){if(t&1&&(r(0,"p",11),l(1),a()),t&2){let e=c();s(),M(e.text)}}var N=class t{id;title="";text="";image="";cardClick=new b;onClick(){this.cardClick.emit(this.id)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-task-card"]],inputs:{id:"id",title:"title",text:"text",image:"image"},outputs:{cardClick:"cardClick"},decls:12,vars:3,consts:[[1,"task-card",3,"click"],["class","task-image",4,"ngIf"],[1,"task-content"],[1,"task-title"],["class","task-description",4,"ngIf"],[1,"task-actions"],["title","\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",1,"btn-more"],[1,"more-icon"],[1,"more-text"],[1,"task-image"],[3,"src","alt"],[1,"task-description"]],template:function(e,n){e&1&&(r(0,"div",0),u("click",function(){return n.onClick()}),_(1,_e,2,2,"div",1),r(2,"div",2)(3,"h3",3),l(4),a(),_(5,fe,2,1,"p",4),a(),r(6,"div",5)(7,"button",6)(8,"span",7),l(9,"\u2192"),a(),r(10,"span",8),l(11,"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),a()()()()),e&2&&(s(),d("ngIf",n.image),s(3),M(n.title),s(),d("ngIf",n.text))},dependencies:[v,h],styles:['.task-card[_ngcontent-%COMP%]{background:#f8f9fa;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:2px solid rgb(0,71,132);border-radius:16px;padding:0;min-height:280px;height:auto;transition:all .3s ease;cursor:pointer;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 12px #0047841f}.dark[_nghost-%COMP%]   .task-card[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .task-card[_ngcontent-%COMP%]{background:#343a40;border:2px solid rgb(0,100,180);box-shadow:0 4px 12px #0064b426}.task-card[_ngcontent-%COMP%]:hover{border-color:#003869;box-shadow:0 12px 32px #0047844d;transform:translateY(-6px)}.dark[_nghost-%COMP%]   .task-card[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .task-card[_ngcontent-%COMP%]:hover{border-color:#0078c8;box-shadow:0 12px 32px #0064b473}.task-image[_ngcontent-%COMP%]{width:100%;height:140px;background:#0047840d;position:relative;overflow:hidden}.task-image[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:70%;background:linear-gradient(to top,rgba(0,0,0,.7),transparent);pointer-events:none;z-index:1}.task-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease;display:block}.task-card[_ngcontent-%COMP%]:hover   .task-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.dark[_nghost-%COMP%]   .task-image[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .task-image[_ngcontent-%COMP%]{background:#0064b41a}.task-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px;padding:16px 20px;min-height:100px;position:relative;background:linear-gradient(to bottom,#f8f9fa00,#f8f9fa80,#f8f9fa 16%),#f8f9fa}.dark[_nghost-%COMP%]   .task-content[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .task-content[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#343a4000,#343a4080,#343a40 16%),#343a40}.task-title[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700;color:var(--text-primary);line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;word-break:break-word;letter-spacing:-.01em}.task-description[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:var(--text-secondary);line-height:1.5;display:-webkit-box;-webkit-line-clamp:5;line-clamp:5;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.task-actions[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:20px;opacity:0;transition:opacity .2s;z-index:10}.task-card[_ngcontent-%COMP%]:hover   .task-actions[_ngcontent-%COMP%]{opacity:1}.btn-more[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:var(--primary-color);color:#fff;border:none;padding:8px 16px;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;box-shadow:0 2px 8px #0047844d}.btn-more[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translate(4px);box-shadow:0 4px 12px #00478466}.more-icon[_ngcontent-%COMP%]{font-size:1.1rem;transition:transform .2s}.btn-more[_ngcontent-%COMP%]:hover   .more-icon[_ngcontent-%COMP%]{transform:translate(2px)}']})};function be(t,i){if(t&1&&(r(0,"h2",18),l(1),a()),t&2){let e=c(2);s(),M(e.task.title)}}function ke(t,i){if(t&1){let e=f();r(0,"input",19),E("ngModelChange",function(o){p(e);let m=c(2);return T(m.editTitle,o)||(m.editTitle=o),g(o)}),a()}if(t&2){let e=c(2);y("ngModel",e.editTitle)}}function Ce(t,i){if(t&1){let e=f();r(0,"div",26),u("click",function(){p(e);let o=c(3);return g(o.openImageFullscreen(o.task.image))}),k(1,"img",27),a()}if(t&2){let e=c(3);s(),d("src",e.task.image,P)("alt",e.task.title)}}function he(t,i){if(t&1&&k(0,"div",28),t&2){let e=c(3);d("innerHTML",e.task.text,X)}}function ve(t,i){t&1&&(r(0,"div",29)(1,"p",30),l(2,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"),a()())}function Me(t,i){if(t&1&&(r(0,"div",20)(1,"div",21)(2,"span",22),l(3),D(4,"date"),a()(),_(5,Ce,2,2,"div",23)(6,he,1,1,"div",24)(7,ve,3,0,"div",25),a()),t&2){let e=c(2);s(3),w("\u0421\u043E\u0437\u0434\u0430\u043D\u043E: ",te(4,4,e.task.createdAt,"dd.MM.yyyy HH:mm")),s(2),d("ngIf",e.task.image),s(),d("ngIf",e.task.text),s(),d("ngIf",!e.task.text)}}function Pe(t,i){if(t&1){let e=f();r(0,"div",38),k(1,"img",39),r(2,"button",40),u("click",function(){p(e);let o=c(3);return g(o.removeImage())}),l(3," \u2715 "),a()()}if(t&2){let e=c(3);s(),d("src",e.selectedImagePreview||e.task.image,P)}}function Oe(t,i){if(t&1){let e=f();r(0,"div",31)(1,"div",32)(2,"label"),l(3,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:"),a(),r(4,"div",33),_(5,Pe,4,1,"div",34),r(6,"input",35,0),u("change",function(o){p(e);let m=c(2);return g(m.onFileSelected(o))}),a(),r(8,"button",36),u("click",function(){p(e);let o=S(7);return g(o.click())}),l(9),a()()(),r(10,"div",32)(11,"label"),l(12,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:"),a(),r(13,"textarea",37),E("ngModelChange",function(o){p(e);let m=c(2);return T(m.editText,o)||(m.editText=o),g(o)}),a()()()}if(t&2){let e=c(2);s(5),d("ngIf",e.selectedImagePreview||e.task.image),s(4),w(" \u{1F4F7} ",e.selectedImagePreview||e.task.image?"\u0417\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0444\u043E\u0442\u043E":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u043E\u0442\u043E"," "),s(4),y("ngModel",e.editText)}}function we(t,i){if(t&1){let e=f();r(0,"button",41),u("click",function(){p(e);let o=c(2);return g(o.respond.emit())}),l(1," \u2709\uFE0F \u041E\u0442\u043A\u043B\u0438\u043A\u043D\u0443\u0442\u044C\u0441\u044F "),a()}}function ye(t,i){if(t&1){let e=f();r(0,"button",42),u("click",function(){p(e);let o=c(2);return g(o.onDelete())}),l(1," \u{1F5D1}\uFE0F \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),a()}}function Te(t,i){if(t&1){let e=f();r(0,"button",43),u("click",function(){p(e);let o=c(2);return g(o.startEdit())}),l(1," \u270F\uFE0F \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),a()}}function Ee(t,i){if(t&1){let e=f();r(0,"button",43),u("click",function(){p(e);let o=c(2);return g(o.cancelEdit())}),l(1," \u041E\u0442\u043C\u0435\u043D\u0430 "),a()}}function De(t,i){if(t&1){let e=f();r(0,"button",44),u("click",function(){p(e);let o=c(2);return g(o.saveEdit())}),l(1," \u{1F4BE} \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),a()}}function Ie(t,i){if(t&1){let e=f();r(0,"div",3)(1,"div",4)(2,"div",5),_(3,be,2,1,"h2",6)(4,ke,1,1,"input",7),r(5,"button",8),u("click",function(){p(e);let o=c();return g(o.close.emit())}),l(6,"\u2715"),a()(),_(7,Me,8,7,"div",9)(8,Oe,14,3,"div",10),r(9,"div",11)(10,"div",12),_(11,we,2,0,"button",13)(12,ye,2,0,"button",14),a(),r(13,"div",15),_(14,Te,2,0,"button",16)(15,Ee,2,0,"button",16)(16,De,2,0,"button",17),a()()()()}if(t&2){let e=c();s(3),d("ngIf",!e.isEditing),s(),d("ngIf",e.isEditing),s(3),d("ngIf",!e.isEditing),s(),d("ngIf",e.isEditing),s(3),d("ngIf",!e.isEditing),s(),d("ngIf",e.isAdmin&&e.isEditing),s(2),d("ngIf",!e.isEditing&&e.isAdmin),s(),d("ngIf",e.isEditing),s(),d("ngIf",e.isEditing)}}function Se(t,i){if(t&1){let e=f();r(0,"div",45),u("click",function(){p(e);let o=c();return g(o.closeImageFullscreen())}),r(1,"button",46),u("click",function(){p(e);let o=c();return g(o.closeImageFullscreen())}),l(2,"\u2715"),a(),r(3,"img",47),u("click",function(o){return p(e),g(o.stopPropagation())}),a()()}if(t&2){let e=c();s(3),d("src",e.fullscreenImage,P)}}var H=class t{task=null;isAdmin=!1;close=new b;save=new b;delete=new b;respond=new b;isEditing=!1;editTitle="";editText="";selectedImagePreview=null;selectedImageFile=null;imageRemoved=!1;fullscreenImage=null;ngOnChanges(){this.task?(this.editTitle=this.task.title,this.editText=this.task.text||"",this.selectedImagePreview=null,this.imageRemoved=!1,this.isEditing=!1,document.body.style.overflow="hidden"):document.body.style.overflow=""}startEdit(){this.isEditing=!0}onFileSelected(i){let e=i.target.files[0];if(e&&e.type.startsWith("image/")){this.selectedImageFile=e,this.imageRemoved=!1;let n=new FileReader;n.onload=o=>{this.selectedImagePreview=o.target.result},n.readAsDataURL(e)}}removeImage(){this.selectedImagePreview=null,this.selectedImageFile=null,this.imageRemoved=!0}saveEdit(){if(this.editTitle.trim()){let i={title:this.editTitle.trim(),text:this.editText.trim()};this.selectedImagePreview?i.image=this.selectedImagePreview:this.imageRemoved&&(i.image=""),this.save.emit(i),this.isEditing=!1,this.selectedImagePreview=null,this.selectedImageFile=null,this.imageRemoved=!1}}cancelEdit(){this.task&&(this.editTitle=this.task.title,this.editText=this.task.text||""),this.isEditing=!1,this.selectedImagePreview=null,this.selectedImageFile=null,this.imageRemoved=!1}onDelete(){this.delete.emit()}openImageFullscreen(i){this.fullscreenImage=i}closeImageFullscreen(){this.fullscreenImage=null}ngOnDestroy(){document.body.style.overflow=""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-task-detail"]],inputs:{task:"task",isAdmin:"isAdmin"},outputs:{close:"close",save:"save",delete:"delete",respond:"respond"},features:[Q],decls:2,vars:2,consts:[["fileInput",""],["class","modal-backdrop",4,"ngIf"],["class","image-fullscreen",3,"click",4,"ngIf"],[1,"modal-backdrop"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","text","placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438","class","modal-title-edit","autofocus","",3,"ngModel","ngModelChange",4,"ngIf"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],["class","modal-body editing",4,"ngIf"],[1,"modal-footer"],[1,"footer-left"],["class","btn-respond",3,"click",4,"ngIf"],["class","btn-danger",3,"click",4,"ngIf"],[1,"footer-right"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-primary",3,"click",4,"ngIf"],[1,"modal-title"],["type","text","placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438","autofocus","",1,"modal-title-edit",3,"ngModelChange","ngModel"],[1,"modal-body"],[1,"task-meta"],[1,"task-date"],["class","task-image",3,"click",4,"ngIf"],["class","task-description",3,"innerHTML",4,"ngIf"],["class","task-description empty",4,"ngIf"],[1,"task-image",3,"click"],[3,"src","alt"],[1,"task-description",3,"innerHTML"],[1,"task-description","empty"],[1,"no-description"],[1,"modal-body","editing"],[1,"form-group"],[1,"image-upload-section"],["class","current-image",4,"ngIf"],["type","file","accept","image/*",1,"file-input",3,"change"],["type","button",1,"btn-choose-file",3,"click"],["placeholder","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438","rows","10",1,"edit-text-large",3,"ngModelChange","ngModel"],[1,"current-image"],["alt","Preview",3,"src"],["type","button","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",1,"btn-remove-image",3,"click"],[1,"btn-respond",3,"click"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"image-fullscreen",3,"click"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"btn-close-fullscreen",3,"click"],["alt","Fullscreen",3,"click","src"]],template:function(e,n){e&1&&_(0,Ie,17,9,"div",1)(1,Se,4,1,"div",2),e&2&&(d("ngIf",n.task),s(),d("ngIf",n.fullscreenImage))},dependencies:[v,h,z,V,A,F,ie],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(0,0,0,.1);border-radius:16px;width:100%;max-width:1200px;max-height:92vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000001a;animation:_ngcontent-%COMP%_slideUp .3s ease}.dark[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#0d1117f2;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);box-shadow:0 20px 60px #000c}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid rgba(0,0,0,.1);gap:16px}.dark[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1)}.modal-title[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;font-weight:600;margin:0;color:var(--text-primary);line-height:1.3;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.modal-title-edit[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:2px solid rgba(0,0,0,.15);border-radius:8px;background:#00000005;color:var(--text-primary);font-family:inherit;font-size:1.5rem;font-weight:600}.dark[_nghost-%COMP%]   .modal-title-edit[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-title-edit[_ngcontent-%COMP%]{background:#ffffff0d;border:2px solid rgba(255,255,255,.2)}.modal-title-edit[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);background:#00000008}.dark[_nghost-%COMP%]   .modal-title-edit[_ngcontent-%COMP%]:focus, .dark   [_nghost-%COMP%]   .modal-title-edit[_ngcontent-%COMP%]:focus{background:#ffffff14}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:var(--text-secondary);cursor:pointer;padding:4px 12px;border-radius:8px;transition:all .2s;line-height:1;flex-shrink:0}.btn-close[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:var(--text-primary)}[_ngcontent-%COMP%]:root.light   .btn-close[_ngcontent-%COMP%]:hover{background:#0000000d}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px 32px}.modal-body.editing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.task-meta[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid rgba(0,0,0,.08);font-size:.9rem;color:var(--text-secondary)}.dark[_nghost-%COMP%]   .task-meta[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .task-meta[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.08)}.task-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.task-image[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px;overflow:hidden;border:2px solid rgba(0,71,132,.2);max-height:400px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}.task-image[_ngcontent-%COMP%]:hover{border-color:#00478466;box-shadow:0 4px 12px #00478426}.task-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.dark[_nghost-%COMP%]   .task-image[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .task-image[_ngcontent-%COMP%]{border-color:#0064b44d}.dark[_nghost-%COMP%]   .task-image[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .task-image[_ngcontent-%COMP%]:hover{border-color:#0064b480}.task-description[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.8;color:var(--text-primary);white-space:pre-wrap;word-wrap:break-word}.task-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px}.task-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.task-description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;margin:16px 0}.task-description.empty[_ngcontent-%COMP%]{text-align:center;padding:40px 0}.no-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:var(--text-primary)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.file-input[_ngcontent-%COMP%]{display:none}.btn-choose-file[_ngcontent-%COMP%]{padding:12px 20px;background:#0047841a;border:2px solid rgba(0,71,132,.3);border-radius:8px;color:#004784;font-weight:600;cursor:pointer;transition:all .2s;font-size:1rem}.btn-choose-file[_ngcontent-%COMP%]:hover{background:#00478426;border-color:#00478480;transform:translateY(-1px)}.dark[_nghost-%COMP%]   .btn-choose-file[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .btn-choose-file[_ngcontent-%COMP%]{background:#0064b426;border-color:#0064b466;color:#64b4ff}.dark[_nghost-%COMP%]   .btn-choose-file[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .btn-choose-file[_ngcontent-%COMP%]:hover{background:#0064b433;border-color:#0064b499}.current-image[_ngcontent-%COMP%]{position:relative;margin-bottom:12px;border-radius:12px;overflow:hidden;border:2px solid rgba(0,71,132,.2);max-height:300px;display:flex;align-items:center;justify-content:center}.current-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:36px;height:36px;background:#dc3545e6;color:#fff;border:2px solid white;border-radius:50%;cursor:pointer;font-size:1.2rem;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 2px 8px #0000004d}.btn-remove-image[_ngcontent-%COMP%]:hover{background:#dc3545;transform:scale(1.1)}.dark[_nghost-%COMP%]   .current-image[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .current-image[_ngcontent-%COMP%]{border-color:#0064b44d}.edit-text-large[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid rgba(0,0,0,.15);border-radius:12px;background:#00000005;color:var(--text-primary);font-family:inherit;font-size:1.05rem;line-height:1.8;resize:vertical;min-height:200px}.dark[_nghost-%COMP%]   .edit-text-large[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .edit-text-large[_ngcontent-%COMP%]{background:#ffffff0d;border:2px solid rgba(255,255,255,.2)}.edit-text-large[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);background:#00000008}.dark[_nghost-%COMP%]   .edit-text-large[_ngcontent-%COMP%]:focus, .dark   [_nghost-%COMP%]   .edit-text-large[_ngcontent-%COMP%]:focus{background:#ffffff14}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 32px;border-top:1px solid rgba(0,0,0,.1)}.dark[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1)}.footer-left[_ngcontent-%COMP%], .footer-right[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-respond[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;border:none;display:flex;align-items:center;gap:8px}.btn-respond[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-respond[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f666}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f666}.btn-secondary[_ngcontent-%COMP%]{background:#0000000d;color:var(--text-primary);border:1px solid rgba(0,0,0,.15)}.dark[_nghost-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#00000014;transform:translateY(-1px)}.dark[_nghost-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff26}.btn-danger[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.btn-danger[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444480;transform:translateY(-1px)}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:100%;max-height:100vh;border-radius:0}.modal-body[_ngcontent-%COMP%]{padding:20px}.task-title[_ngcontent-%COMP%]{font-size:1.5rem}.modal-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;padding:16px 20px}.footer-left[_ngcontent-%COMP%], .footer-right[_ngcontent-%COMP%]{width:100%}.footer-right[_ngcontent-%COMP%]{flex-direction:column}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{width:100%;justify-content:center}}.image-fullscreen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000f2;display:flex;align-items:center;justify-content:center;z-index:2000;cursor:zoom-out;animation:_ngcontent-%COMP%_fadeIn .2s ease}.image-fullscreen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:95%;max-height:95%;object-fit:contain;cursor:default;border-radius:8px;box-shadow:0 20px 60px #000c}.btn-close-fullscreen[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:50px;height:50px;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;border:2px solid rgba(255,255,255,.5);border-radius:50%;cursor:pointer;font-size:1.5rem;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s;z-index:2001}.btn-close-fullscreen[_ngcontent-%COMP%]:hover{background:#ffffff4d;border-color:#fff;transform:scale(1.1)}"]})};function Ve(t,i){if(t&1){let e=f();r(0,"button",21),u("click",function(){p(e);let o=c();return g(o.removeImage())}),l(1," \u2715 "),a()}}var R=class t{close=new b;save=new b;title="";text="";selectedImagePreview="images/task_default.png";selectedImageFile=null;onFileSelected(i){let e=i.target.files[0];if(e&&e.type.startsWith("image/")){this.selectedImageFile=e;let n=new FileReader;n.onload=o=>{this.selectedImagePreview=o.target.result},n.readAsDataURL(e)}}removeImage(){this.selectedImagePreview="images/task_default.png",this.selectedImageFile=null}onSave(){if(this.title.trim()){let i={title:this.title.trim(),text:this.text.trim()};this.selectedImagePreview&&(i.image=this.selectedImagePreview),this.save.emit(i),this.close.emit()}}onCancel(){this.close.emit()}ngOnInit(){document.body.style.overflow="hidden"}ngOnDestroy(){document.body.style.overflow=""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-task-add"]],outputs:{close:"close",save:"save"},decls:35,vars:6,consts:[["fileInput",""],[1,"modal-overlay"],[1,"modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"image-upload"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"image-preview"],["alt","Preview",3,"src"],["type","button","class","btn-remove-image","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",3,"click",4,"ngIf"],["type","button",1,"upload-btn",3,"click"],[1,"upload-icon"],["for","title"],["id","title","type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435...","maxlength","100","autofocus","",3,"ngModelChange","ngModel"],["for","text"],["id","text","placeholder","\u041E\u043F\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435...","rows","10",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click","disabled"],["type","button","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",1,"btn-remove-image",3,"click"]],template:function(e,n){if(e&1){let o=f();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),l(4,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443"),a(),r(5,"button",4),u("click",function(){return p(o),g(n.onCancel())}),l(6,"\u2715"),a()(),r(7,"div",5)(8,"div",6)(9,"label"),l(10,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"),a(),r(11,"div",7)(12,"input",8,0),u("change",function(x){return p(o),g(n.onFileSelected(x))}),a(),r(14,"div",9),k(15,"img",10),_(16,Ve,2,0,"button",11),a(),r(17,"button",12),u("click",function(){p(o);let x=S(13);return g(x.click())}),r(18,"span",13),l(19,"\u{1F4F7}"),a(),r(20,"span"),l(21),a()()()(),r(22,"div",6)(23,"label",14),l(24,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"),a(),r(25,"input",15),E("ngModelChange",function(x){return p(o),T(n.title,x)||(n.title=x),g(x)}),a()(),r(26,"div",6)(27,"label",16),l(28,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),a(),r(29,"textarea",17),E("ngModelChange",function(x){return p(o),T(n.text,x)||(n.text=x),g(x)}),a()()(),r(30,"div",18)(31,"button",19),u("click",function(){return p(o),g(n.onCancel())}),l(32,"\u041E\u0442\u043C\u0435\u043D\u0430"),a(),r(33,"button",20),u("click",function(){return p(o),g(n.onSave())}),l(34,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),a()()()()}e&2&&(s(15),d("src",n.selectedImagePreview,P),s(),d("ngIf",n.selectedImageFile),s(5),M(n.selectedImageFile?"\u0417\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0444\u043E\u0442\u043E":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u043E\u0442\u043E"),s(4),y("ngModel",n.title),s(4),y("ngModel",n.text),s(4),d("disabled",!n.title.trim()))},dependencies:[v,h,z,V,A,se,F],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(0,0,0,.1);border-radius:16px;width:100%;max-width:1200px;max-height:92vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000001a;animation:_ngcontent-%COMP%_slideUp .3s ease}.dark[_nghost-%COMP%]   .modal[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal[_ngcontent-%COMP%]{background:#0d1117f2;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);box-shadow:0 20px 60px #000c}.modal-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid rgba(0,0,0,.1);display:flex;align-items:center;justify-content:space-between}.dark[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:var(--text-secondary);cursor:pointer;padding:4px 12px;border-radius:8px;transition:all .2s;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{background:#0000000d;color:var(--text-primary)}.dark[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.modal-body[_ngcontent-%COMP%]{padding:24px 32px;overflow-y:auto;flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid rgba(0,0,0,.15);border-radius:12px;background:#00000005;color:var(--text-primary);font-family:inherit;font-size:1.05rem;line-height:1.8;transition:all .2s}.dark[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#ffffff0d;border:2px solid rgba(255,255,255,.2)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);background:#00000008}.dark[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .dark   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .dark[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .dark   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background:#ffffff14}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;min-height:200px}.image-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.upload-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#0047841a;border:2px solid rgba(0,71,132,.3);border-radius:8px;color:#004784;font-weight:600;cursor:pointer;transition:all .2s;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:8px}.upload-btn[_ngcontent-%COMP%]:hover{background:#00478426;border-color:#00478480;transform:translateY(-1px)}.dark[_nghost-%COMP%]   .upload-btn[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:#0064b426;border-color:#0064b466;color:#64b4ff}.dark[_nghost-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover{background:#0064b433;border-color:#0064b499}.upload-icon[_ngcontent-%COMP%]{font-size:1.2rem}.image-preview[_ngcontent-%COMP%]{position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(0,71,132,.2);max-height:400px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:36px;height:36px;background:#dc3545e6;color:#fff;border:2px solid white;border-radius:50%;cursor:pointer;font-size:1.2rem;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 2px 8px #0000004d}.btn-remove-image[_ngcontent-%COMP%]:hover{background:#dc3545;transform:scale(1.1)}.dark[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{border-color:#0064b44d}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid rgba(0,0,0,.1);display:flex;gap:12px;justify-content:flex-end}.dark[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1)}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;border:none;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]{background:#0000000d;color:var(--text-primary)}.btn-cancel[_ngcontent-%COMP%]:hover{background:#0000001a}.dark[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#ffffff1a}.dark[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#ffffff26}.btn-save[_ngcontent-%COMP%]{background:#004784;color:#fff}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:#003869;transform:translateY(-1px);box-shadow:0 4px 12px #0047844d}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};var Y=class t{tasks=K([{id:1,title:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0434\u0438\u0437\u0430\u0439\u043D \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430",text:"\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0441\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0439 \u0434\u0438\u0437\u0430\u0439\u043D \u043E\u0434\u043D\u043E\u0441\u0442\u0440\u0430\u043D\u0438\u0447\u043D\u043E\u0433\u043E \u0441\u0430\u0439\u0442\u0430 \u0434\u043B\u044F \u0441\u0442\u0430\u0440\u0442\u0430\u043F\u0430. \u041D\u0443\u0436\u043D\u044B \u043C\u0430\u043A\u0435\u0442\u044B \u0434\u043B\u044F desktop \u0438 mobile \u0432\u0435\u0440\u0441\u0438\u0439.",image:"images/task_default.png",createdAt:new Date},{id:2,title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C \u0440\u0435\u043A\u043B\u0430\u043C\u0443 \u0432 \u0441\u043E\u0446\u0441\u0435\u0442\u044F\u0445",text:"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0443\u044E \u0440\u0435\u043A\u043B\u0430\u043C\u0443 \u0432 \u0412\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0435 \u0438 Instagram. \u0426\u0435\u043B\u0435\u0432\u0430\u044F \u0430\u0443\u0434\u0438\u0442\u043E\u0440\u0438\u044F: \u043C\u0443\u0436\u0447\u0438\u043D\u044B \u0438 \u0436\u0435\u043D\u0449\u0438\u043D\u044B 25-45 \u043B\u0435\u0442, \u0438\u043D\u0442\u0435\u0440\u0435\u0441\u0443\u044E\u0449\u0438\u0435\u0441\u044F \u0444\u0438\u0442\u043D\u0435\u0441\u043E\u043C.",image:"images/task_default.png",createdAt:new Date},{id:3,title:"\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0442\u0430\u0442\u044C\u0438 \u0434\u043B\u044F \u0431\u043B\u043E\u0433\u0430",text:"\u041F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u0438\u0442\u044C 5 SEO-\u043E\u043F\u0442\u0438\u043C\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u0441\u0442\u0430\u0442\u0435\u0439 \u043F\u043E \u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0435 \u0437\u0434\u043E\u0440\u043E\u0432\u043E\u0433\u043E \u043F\u0438\u0442\u0430\u043D\u0438\u044F. \u041E\u0431\u044A\u0435\u043C \u043A\u0430\u0436\u0434\u043E\u0439 \u0441\u0442\u0430\u0442\u044C\u0438: 3000-4000 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",image:"images/task_default.png",createdAt:new Date}]);allTasks=this.tasks.asReadonly();addTask(i,e,n){let o={id:Date.now(),title:i,text:e,image:n||"images/task_default.png",createdAt:new Date};this.tasks.update(m=>[...m,o])}deleteTask(i){this.tasks.update(e=>e.filter(n=>n.id!==i))}updateTask(i,e,n,o){this.tasks.update(m=>m.map(x=>x.id===i?W(q(W({},x),{title:e,text:n}),o!==void 0&&{image:o}):x))}getTask(i){return this.tasks().find(e=>e.id===i)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fe=(t,i)=>i.id;function ze(t,i){if(t&1){let e=f();r(0,"app-task-card",8),u("cardClick",function(o){p(e);let m=c();return g(m.openTask(o))}),a()}if(t&2){let e=i.$implicit;d("id",e.id)("title",e.title)("text",e.text||"")("image",e.image||"")}}function je(t,i){if(t&1&&(r(0,"div",5)(1,"p"),l(2),a()()),t&2){let e=c();s(2),w("\u041D\u0435\u0442 \u0437\u0430\u0434\u0430\u0447. ",e.authService.isAdmin()?"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E!":"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447.")}}function Be(t,i){if(t&1){let e=f();r(0,"app-task-add",9),u("close",function(){p(e);let o=c();return g(o.closeAddModal())})("save",function(o){p(e);let m=c();return g(m.saveNewTask(o))}),a()}}var ce=class t{constructor(i,e,n,o,m){this.taskService=i;this.authService=e;this.router=n;this.toast=o;this.loading=m}selectedTask=null;showAddModal=!1;addTask(){if(!this.authService.isAdmin()){this.toast.error("\u0422\u043E\u043B\u044C\u043A\u043E \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440 \u043C\u043E\u0436\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0438");return}this.showAddModal=!0}closeAddModal(){this.showAddModal=!1}saveNewTask(i){this.loading.show(),setTimeout(()=>{this.taskService.addTask(i.title,i.text,i.image),this.loading.hide(),this.toast.success("\u0417\u0430\u0434\u0430\u0447\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430"),this.showAddModal=!1},600)}openTask(i){let e=this.taskService.getTask(i);e&&(this.selectedTask=e)}closeTaskDetail(){this.selectedTask=null}saveTaskDetail(i){if(!this.authService.isAdmin()){this.toast.error("\u0422\u043E\u043B\u044C\u043A\u043E \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440 \u043C\u043E\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0438");return}this.selectedTask&&(this.loading.show(),setTimeout(()=>{this.taskService.updateTask(this.selectedTask.id,i.title,i.text,i.image),this.selectedTask=this.taskService.getTask(this.selectedTask.id)||null,this.loading.hide(),this.toast.success("\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B")},500))}deleteTaskFromDetail(){if(!this.authService.isAdmin()){this.toast.error("\u0422\u043E\u043B\u044C\u043A\u043E \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440 \u043C\u043E\u0436\u0435\u0442 \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0438");return}this.selectedTask&&this.toast.confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u0443 \u0437\u0430\u0434\u0430\u0447\u0443?",()=>{this.loading.show(),setTimeout(()=>{this.taskService.deleteTask(this.selectedTask.id),this.loading.hide(),this.toast.success("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0430"),this.selectedTask=null},500)})}onRespond(){if(this.selectedTask){let i=this.authService.getCurrentUser();this.toast.info(`\u041E\u0442\u043A\u043B\u0438\u043A \u043D\u0430 \u0437\u0430\u0434\u0430\u0447\u0443 "${this.selectedTask.title}" \u043E\u0442 ${i?.username}`)}}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||t)(O(Y),O(le),O(oe),O(re),O(ae))};static \u0275cmp=C({type:t,selectors:[["app-tasks"]],decls:9,vars:6,consts:[[3,"addTask","logout","isAdmin","currentUser"],[1,"main-content"],[1,"container"],[1,"tasks-grid"],[3,"id","title","text","image"],[1,"empty-state"],[3,"close","save",4,"ngIf"],[3,"close","save","delete","respond","task","isAdmin"],[3,"cardClick","id","title","text","image"],[3,"close","save"]],template:function(e,n){e&1&&(r(0,"app-header",0),u("addTask",function(){return n.addTask()})("logout",function(){return n.logout()}),a(),r(1,"main",1)(2,"div",2)(3,"div",3),Z(4,ze,1,4,"app-task-card",4,Fe,!1,je,3,1,"div",5),a()()(),_(7,Be,1,0,"app-task-add",6),r(8,"app-task-detail",7),u("close",function(){return n.closeTaskDetail()})("save",function(m){return n.saveTaskDetail(m)})("delete",function(){return n.deleteTaskFromDetail()})("respond",function(){return n.onRespond()}),a()),e&2&&(d("isAdmin",n.authService.isAdmin())("currentUser",n.authService.getCurrentUser()),s(4),$(n.taskService.allTasks()),s(3),d("ngIf",n.showAddModal),s(),d("task",n.selectedTask)("isAdmin",n.authService.isAdmin()))},dependencies:[v,h,j,N,H,R],styles:[".main-content[_ngcontent-%COMP%]{margin-top:80px;padding:40px 0;min-height:calc(100vh - 80px)}.container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 40px}.tasks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;color:var(--text-secondary);font-size:1.1rem}@media (max-width: 768px){.tasks-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.container[_ngcontent-%COMP%]{padding:0 20px}.main-content[_ngcontent-%COMP%]{padding:20px 0}}"]})};export{ce as TasksComponent};
